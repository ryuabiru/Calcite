# Calcite

**Calcite**は、GraphPad Prismにインスパイアされた、直感的な操作が可能なデータ分析・グラフ作成アプリケーションです。プログラミングの知識がなくても、GUI操作だけでデータのインポートから統計解析、論文品質のグラフ作成までをシームレスに行うことを目指しています。

## ✨ 主な機能

  - **データハンドリング**

      - CSVファイルのインポート、クリップボードからのデータ貼り付け（Excelなどに対応）
      - スプレッドシート形式のインタラクティブなテーブル表示と直接編集
      - `pandas.eval`を利用した数式による新しい列の動的作成
      - データ形式の変換（ワイド形式 ⇔ ロング形式）

  - **グラフ描画**

      - **動的UI**: グラフタイプ（散布図、棒グラフ、ペアード散布図）に応じて、データ選択UIが最適な形式に自動で切り替わります。
      - **詳細なカスタマイズ**: タイトルや軸ラベルのフォントサイズ、軸範囲、対数スケール、グリッド線などをGUIから細かく設定可能。
      - **Prism風スタイル**: 論文で好まれる、グラフの上と右の枠線を非表示にするオプションを搭載。
      - **高解像度エクスポート**: 作成したグラフをPNG, JPEG, SVG, PDF形式で高DPIで保存できます。

  - **統計解析**

      - **Independent t-test**: 複数条件でのフィルタリングが可能なUIを実装し、複雑なTidy Dataにも対応。
      - **Paired t-test**: 対応のある2群間の比較検定。
      - **One-way ANOVA**: 3群以上の比較と、Tukey's HSDによる多重比較検定。
      - **カイ二乗検定**: カテゴリカル変数間の関連を検定。
      - **回帰分析**: 線形回帰および非線形回帰（シグモイド曲線、4PL）に対応し、R²値をグラフに表示。
      - **自動アノテーション**: 検定結果のp値をグラフ上にブラケットとアスタリスク(\*)で自動描画。複数のアノテーションが重ならないようY軸方向に自動で整列します。

## 🛠️ セットアップ

本アプリケーションはクロスプラットフォーム（Windows, macOS, Linux）で動作します。

1.  **リポジトリをクローン**

    ```bash
    git clone https://github.com/ryuki-abiru/calcite.git
    cd calcite
    ```

2.  **仮想環境の作成と有効化**

    ```bash
    # Python 3.10以降を推奨
    python -m venv venv
    # Windows
    .\venv\Scripts\activate
    # macOS / Linux
    source venv/bin/activate
    ```

3.  **依存ライブラリのインストール**
    以下の内容で`requirements.txt`ファイルを作成し、インストールを実行してください。

    **`requirements.txt`**:

    ```
    PySide6
    pandas
    numpy
    scipy
    statsmodels
    matplotlib
    ```

    ```bash
    pip install -r requirements.txt
    ```

4.  **アプリケーションの実行**

    ```bash
    python main.py
    ```

## 🚀 使い方

1.  **`File > Open CSV...`** または **`Edit > Paste`** でデータを読み込みます。
2.  ツールバーから**グラフタイプ**（Scatter, Barなど）を選択します。
3.  画面下部の\*\*「データ」タブ\*\*で、X軸・Y軸などに使用するカラムを選択します。
4.  「フォーマット」「テキスト」「軸」タブでグラフの見た目を調整します。
5.  **`Analysis`** メニューから実行したい統計解析を選択し、ダイアログの指示に従います。
6.  完成したグラフは **`File > Save Graph As...`** から保存できます。

-----
