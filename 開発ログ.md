# プロジェクト「Calcite」開発ログ (2025/08/19更新)

## 1. このプロジェクトで実装したいこと

-   **直感的な操作性**: `Mito`や`GraphPad Prism`のように、プログラミング知識がなくてもGUI操作だけでデータハンドリング、統計解析、グラフ作成が完結するアプリケーションを目指す。
-   **統合環境**: データのインポート、表計算、統計解析、グラフ描画、結果のエクスポートといった一連のワークフローを、シームレスに一つのウィンドウで提供する。
-   **論文品質のグラフ**: ユーザーがタイトル、ラベル、色、エラーバーなどを自由に編集でき、学術論文やプレゼンテーションにそのまま利用できる高品質なグラフを作成できる機能。

---

## 2. これまでに実装してきたこと

-   **基本アーキテクチャ**
    -   `PySide6`をベースとしたGUIアプリケーションの構築。
    -   メンテナンス性を考慮したファイル分割（`main`, `main_window`, `pandas_model`, `graph_widget`, `properties_widget`）。

-   **データ入出力**
    -   メニューバーからCSVファイルを読み込み、`Pandas`データフレームとして内部で保持。
    -   `QTableView`を用いて、読み込んだデータを表形式で表示。

-   **表計算機能の強化 (v2)**
    -   テーブル内のセルをダブルクリックすることで、**値を直接編集**できる機能。
    -   **カラムヘッダー**をダブルクリックして直接編集する機能。
    -   テーブル上の右クリックメニューから**行や列の追加・削除**を行う機能。
    -   テーブルへの編集（値、カラム名、行/列の増減）がグラフに**リアルタイムで反映**される完全なデータ連携。

-   **グラフ描画機能の刷新**
    -   **Tidy Data（整然データ）**の設計思想を導入し、複雑なデータ構造にも対応できる堅牢なアーキテクチャを構築。
    -   プロパティパネルから、**Y軸(値)**, **X軸(主グループ)**, **サブグループ**に用いる列をユーザーが指定する方式に変更。
    -   バックエンドで `pandas.groupby` を活用し、個別データから**平均値**や**標準偏差**を自動で算出してグラフ化するロジックを実装。これにより、多階層のグループを持つデータにも対応可能に。

-   **統計解析機能**
    -   **独立t検定**: 選択した2列のデータでt検定を実行し、結果をポップアップで表示。
    -   **線形回帰分析**: 散布図にフィットラインを描画し、凡例に**R²値**を表示。

-   **グラフ編集機能の強化 (v2)**
    -   ドッキング可能な**「プロパティパネル」**から各種設定が可能。
    -   グラフの**タイトル**と**X/Y軸ラベル**をリアルタイムで更新。
    -   散布図の**マーカーの種類**（円、四角、三角など）を選択・変更。
    -   グラフの**基本色**をカラーピッカーから選択・変更。

---

## 3. これからの実装予定

-   **グラフ編集機能のさらなる強化**
    -   プロパティパネルに、**線のスタイル**を変更するコントロールを追加。
    -   サブグループごとの色を個別に指定できる機能。
    -   グラフの**軸の範囲**を編集する機能。

-   **統計解析機能の追加**
    -   **ANOVA（分散分析）**など、より高度な統計手法の実装。
    -   解析結果をポップアップではなく、専用の**結果表示パネル**やシートに表示する機能。

-   **エクスポート機能**
    -   作成したグラフをPNGやSVG形式で保存する機能。
    -   表示されているテーブルデータをCSV形式で保存する機能。